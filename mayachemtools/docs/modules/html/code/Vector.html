<html>
<head>
<title>MayaChemTools:Code:Vector.pm</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../css/MayaChemToolsCode.css">
</head>
<body leftmargin="20" rightmargin="20" topmargin="10" bottommargin="10">
<br/>
<center>
<a href="http://www.mayachemtools.org" title="MayaChemTools Home"><img src="../../../images/MayaChemToolsLogo.gif" border="0" alt="MayaChemTools"></a>
</center>
<br/>
<pre>
<a name="package-Vector-"></a>   1 <span class="k">package </span><span class="i">Vector</span><span class="sc">;</span>
   2 <span class="c">#</span>
   3 <span class="c"># File: Vector.pm</span>
   4 <span class="c"># Author: Manish Sud &lt;msud@san.rr.com&gt;</span>
   5 <span class="c">#</span>
   6 <span class="c"># Copyright (C) 2018 Manish Sud. All rights reserved.</span>
   7 <span class="c">#</span>
   8 <span class="c"># This file is part of MayaChemTools.</span>
   9 <span class="c">#</span>
  10 <span class="c"># MayaChemTools is free software; you can redistribute it and/or modify it under</span>
  11 <span class="c"># the terms of the GNU Lesser General Public License as published by the Free</span>
  12 <span class="c"># Software Foundation; either version 3 of the License, or (at your option) any</span>
  13 <span class="c"># later version.</span>
  14 <span class="c">#</span>
  15 <span class="c"># MayaChemTools is distributed in the hope that it will be useful, but without</span>
  16 <span class="c"># any warranty; without even the implied warranty of merchantability of fitness</span>
  17 <span class="c"># for a particular purpose.  See the GNU Lesser General Public License for more</span>
  18 <span class="c"># details.</span>
  19 <span class="c">#</span>
  20 <span class="c"># You should have received a copy of the GNU Lesser General Public License</span>
  21 <span class="c"># along with MayaChemTools; if not, see &lt;http://www.gnu.org/licenses/&gt; or</span>
  22 <span class="c"># write to the Free Software Foundation Inc., 59 Temple Place, Suite 330,</span>
  23 <span class="c"># Boston, MA, 02111-1307, USA.</span>
  24 <span class="c">#</span>
  25 
  26 <span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
  27 <span class="k">use</span> <span class="w">Carp</span><span class="sc">;</span>
  28 <span class="k">use</span> <span class="w">Exporter</span><span class="sc">;</span>
  29 <span class="k">use</span> <span class="w">Scalar::Util</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  30 <span class="k">use</span> <span class="w">StatisticsUtil</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  31 
  32 <span class="k">use</span> <span class="w">vars</span> <span class="q">qw(@ISA @EXPORT @EXPORT_OK %EXPORT_TAGS)</span><span class="sc">;</span>
  33 
  34 <span class="i">@ISA</span> = <span class="q">qw(Exporter)</span><span class="sc">;</span>
  35 <span class="i">@EXPORT</span> = <span class="q">qw(IsVector UnitXVector UnitYVector UnitZVector UnitVector ZeroVector)</span><span class="sc">;</span>
  36 <span class="i">@EXPORT_OK</span> = <span class="q">qw(SetValuePrintFormat)</span><span class="sc">;</span>
  37 
  38 <span class="i">%EXPORT_TAGS</span> = <span class="s">(</span>
  39                 <span class="w">all</span>  <span class="cm">=&gt;</span> <span class="s">[</span><span class="i">@EXPORT</span><span class="cm">,</span> <span class="i">@EXPORT_OK</span><span class="s">]</span>
  40                <span class="s">)</span><span class="sc">;</span>
  41 
  42 <span class="c"># Setup class variables...</span>
  43 <span class="k">my</span><span class="s">(</span><span class="i">$ClassName</span><span class="cm">,</span> <span class="i">$ValueFormat</span><span class="s">)</span><span class="sc">;</span>
  44 <span class="i">_InitializeClass</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
  45 
  46 <span class="c">#</span>
  47 <span class="c"># Using the following explicity overloaded operators, Perl automatically generates methods</span>
  48 <span class="c"># for operations with no explicitly defined methods. Autogenerated methods are possible for</span>
  49 <span class="c"># these operators:</span>
  50 <span class="c">#</span>
  51 <span class="c">#    o Arithmetic operators: += -= *= /= **= %= ++ -- x= .=</span>
  52 <span class="c">#    o Increment and decrement: ++ --</span>
  53 <span class="c">#</span>
  54 <span class="c"># &#39;fallback&#39; is set to &#39;false&#39; to raise exception for all other operators.</span>
  55 <span class="c">#</span>
  56 <span class="k">use</span> <span class="w">overload</span> <span class="q">&#39;&quot;&quot;&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;StringifyVector&#39;</span><span class="cm">,</span>
  57 
  58   <span class="q">&#39;0+&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_NumifyVector&#39;</span><span class="cm">,</span>
  59 
  60   <span class="q">&#39;@{}&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorToArrayOperator&#39;</span><span class="cm">,</span>
  61 
  62   <span class="q">&#39;+&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorAdditionOperator&#39;</span><span class="cm">,</span>
  63   <span class="q">&#39;-&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorSubtractionOperator&#39;</span><span class="cm">,</span>
  64   <span class="q">&#39;*&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorMultiplicationOperator&#39;</span><span class="cm">,</span>
  65   <span class="q">&#39;/&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorDivisionOperator&#39;</span><span class="cm">,</span>
  66   <span class="q">&#39;**&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorExponentiationOperator&#39;</span><span class="cm">,</span>
  67   <span class="q">&#39;%&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorModulusOperator&#39;</span><span class="cm">,</span>
  68 
  69   <span class="q">&#39;x&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorCrossProductOperator&#39;</span><span class="cm">,</span>
  70   <span class="q">&#39;.&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorDotProductOperator&#39;</span><span class="cm">,</span>
  71 
  72   <span class="q">&#39;bool&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorBooleanOperator&#39;</span><span class="cm">,</span>
  73   <span class="q">&#39;!&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorNotBooleanOperator&#39;</span><span class="cm">,</span>
  74 
  75   <span class="q">&#39;==&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorEqualOperator&#39;</span><span class="cm">,</span>
  76   <span class="q">&#39;!=&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorNotEqualOperator&#39;</span><span class="cm">,</span>
  77   <span class="q">&#39;&lt;&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorLessThanOperator&#39;</span><span class="cm">,</span>
  78   <span class="q">&#39;&lt;=&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorLessThanEqualOperator&#39;</span><span class="cm">,</span>
  79   <span class="q">&#39;&gt;&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorGreatarThanOperator&#39;</span><span class="cm">,</span>
  80   <span class="q">&#39;&gt;=&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorGreatarThanEqualOperator&#39;</span><span class="cm">,</span>
  81 
  82   <span class="q">&#39;neg&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorNegativeValueOperator&#39;</span><span class="cm">,</span>
  83 
  84   <span class="q">&#39;abs&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorAbsoluteValueOperator&#39;</span><span class="cm">,</span>
  85   <span class="q">&#39;exp&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorExpNaturalBaseOperator&#39;</span><span class="cm">,</span>
  86   <span class="q">&#39;log&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorLogNaturalBaseOperator&#39;</span><span class="cm">,</span>
  87   <span class="q">&#39;sqrt&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorSquareRootOperator&#39;</span><span class="cm">,</span>
  88   <span class="q">&#39;cos&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorCosineOperator&#39;</span><span class="cm">,</span>
  89   <span class="q">&#39;sin&#39;</span> <span class="cm">=&gt;</span> <span class="q">&#39;_VectorSineOperator&#39;</span><span class="cm">,</span>
  90 
  91   <span class="q">&#39;fallback&#39;</span> <span class="cm">=&gt;</span> <span class="k">undef</span><span class="sc">;</span>
  92 
  93 <span class="c"># Class constructor...</span>
<a name="new-"></a>  94 <span class="k">sub </span><span class="m">new</span> <span class="s">{</span>
  95   <span class="k">my</span><span class="s">(</span><span class="i">$Class</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
  96 
  97   <span class="c"># Initialize object...</span>
  98   <span class="k">my</span> <span class="i">$This</span> = <span class="s">{</span><span class="s">}</span><span class="sc">;</span>
  99   <span class="k">bless</span> <span class="i">$This</span><span class="cm">,</span> <span class="k">ref</span><span class="s">(</span><span class="i">$Class</span><span class="s">)</span> || <span class="i">$Class</span><span class="sc">;</span>
 100   <span class="i">$This</span><span class="i">-&gt;_InitializeVector</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 101 
 102   <span class="i">$This</span><span class="i">-&gt;_AddValues</span><span class="s">(</span><span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 103 
 104   <span class="k">return</span> <span class="i">$This</span><span class="sc">;</span>
 105 <span class="s">}</span>
 106 
 107 <span class="c"># Initialize object data...</span>
 108 <span class="c">#</span>
<a name="_InitializeVector-"></a> 109 <span class="k">sub </span><span class="m">_InitializeVector</span> <span class="s">{</span>
 110   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 111 
 112   <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}} = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 113 <span class="s">}</span>
 114 
 115 <span class="c"># Initialize class ...</span>
<a name="_InitializeClass-"></a> 116 <span class="k">sub </span><span class="m">_InitializeClass</span> <span class="s">{</span>
 117   <span class="c">#Class name...</span>
 118   <span class="i">$ClassName</span> = <span class="w">__PACKAGE__</span><span class="sc">;</span>
 119 
 120   <span class="c"># Print format for vector values...</span>
 121   <span class="i">$ValueFormat</span> = <span class="q">&quot;%g&quot;</span><span class="sc">;</span>
 122 <span class="s">}</span>
 123 
 124 <span class="c"># Initialize vector values using:</span>
 125 <span class="c">#    o List of values</span>
 126 <span class="c">#    o Reference to an list of values</span>
 127 <span class="c">#    o Another vector object</span>
 128 <span class="c">#</span>
<a name="_AddValues-"></a> 129 <span class="k">sub </span><span class="m">_AddValues</span> <span class="s">{</span>
 130   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 131 
 132   <span class="k">if</span> <span class="s">(</span>!<span class="i">@Values</span><span class="s">)</span> <span class="s">{</span>
 133     <span class="k">return</span><span class="sc">;</span>
 134   <span class="s">}</span>
 135 
 136   <span class="c"># Set vector values...</span>
 137   <span class="k">my</span><span class="s">(</span><span class="i">$FirstValue</span><span class="cm">,</span> <span class="i">$TypeOfFirstValue</span><span class="s">)</span><span class="sc">;</span>
 138   <span class="i">$FirstValue</span> = <span class="i">$Values</span>[<span class="n">0</span>]<span class="sc">;</span>
 139   <span class="i">$TypeOfFirstValue</span> = <span class="k">ref</span> <span class="i">$FirstValue</span><span class="sc">;</span>
 140   <span class="k">if</span> <span class="s">(</span><span class="i">$TypeOfFirstValue</span> =~ <span class="q">/^(SCALAR|HASH|CODE|REF|GLOB)/</span><span class="s">)</span> <span class="s">{</span>
 141     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;_AddValues: Trying to add values to vector object with a reference to unsupported value format...&quot;</span><span class="sc">;</span>
 142   <span class="s">}</span>
 143 
 144   <span class="k">if</span> <span class="s">(</span><span class="i">_IsVector</span><span class="s">(</span><span class="i">$FirstValue</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 145     <span class="c"># Initialize using Vector...</span>
 146     <span class="k">push</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="cm">,</span> <span class="i">@</span>{<span class="i">$FirstValue</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
 147   <span class="s">}</span>
 148   <span class="k">elsif</span> <span class="s">(</span><span class="i">$TypeOfFirstValue</span> =~ <span class="q">/^ARRAY/</span><span class="s">)</span> <span class="s">{</span>
 149     <span class="c"># Initialize using array refernce...</span>
 150     <span class="k">push</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="cm">,</span> <span class="i">@</span>{<span class="i">$FirstValue</span>}<span class="sc">;</span>
 151   <span class="s">}</span>
 152   <span class="k">else</span> <span class="s">{</span>
 153     <span class="c"># It&#39;s a list of values...</span>
 154     <span class="k">push</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="cm">,</span> <span class="i">@Values</span><span class="sc">;</span>
 155   <span class="s">}</span>
 156 <span class="s">}</span>
 157 
 158 <span class="c"># Add values to a vector using a vector, reference to an array or an array...</span>
<a name="AddValues-"></a> 159 <span class="k">sub </span><span class="m">AddValues</span> <span class="s">{</span>
 160   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 161 
 162   <span class="i">$This</span><span class="i">-&gt;_AddValues</span><span class="s">(</span><span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 163 
 164   <span class="k">return</span> <span class="i">$This</span><span class="sc">;</span>
 165 <span class="s">}</span>
 166 
 167 <span class="c"># Copy vector...</span>
<a name="Copy-"></a> 168 <span class="k">sub </span><span class="m">Copy</span> <span class="s">{</span>
 169   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 170   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="s">)</span><span class="sc">;</span>
 171 
 172   <span class="c"># Copy vector values...</span>
 173   <span class="i">$Vector</span> = <span class="s">(</span><span class="k">ref</span> <span class="i">$This</span><span class="s">)</span><span class="i">-&gt;new</span><span class="s">(</span>\<span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="s">)</span><span class="sc">;</span>
 174 
 175   <span class="c"># Copy value format for stringification...</span>
 176   <span class="k">if</span> <span class="s">(</span><span class="k">exists</span> <span class="i">$This</span>-&gt;{<span class="w">ValueFormat</span>}<span class="s">)</span> <span class="s">{</span>
 177     <span class="i">$Vector</span>-&gt;{<span class="w">ValueFormat</span>} = <span class="i">$This</span>-&gt;{<span class="w">ValueFormat</span>}<span class="sc">;</span>
 178   <span class="s">}</span>
 179   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 180 <span class="s">}</span>
 181 
 182 <span class="c"># Get 3D vector length...</span>
<a name="GetLength-"></a> 183 <span class="k">sub </span><span class="m">GetLength</span> <span class="s">{</span>
 184   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 185 
 186   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 187     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetGetLength: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 188   <span class="s">}</span>
 189   <span class="k">my</span><span class="s">(</span><span class="i">$Length</span><span class="cm">,</span> <span class="i">$DotProduct</span><span class="s">)</span><span class="sc">;</span>
 190   <span class="i">$DotProduct</span> = <span class="i">$This</span> . <span class="i">$This</span><span class="sc">;</span>
 191   <span class="i">$Length</span> = <span class="k">sqrt</span> <span class="i">$DotProduct</span><span class="sc">;</span>
 192 
 193   <span class="k">return</span> <span class="i">$Length</span><span class="sc">;</span>
 194 <span class="s">}</span>
 195 
 196 <span class="c"># Length of a 3D vector by another name...</span>
<a name="GetMagnitude-"></a> 197 <span class="k">sub </span><span class="m">GetMagnitude</span> <span class="s">{</span>
 198   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 199   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;GetLength</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 200 <span class="s">}</span>
 201 
 202 <span class="c"># Normalize 3D vector...</span>
<a name="Normalize-"></a> 203 <span class="k">sub </span><span class="m">Normalize</span> <span class="s">{</span>
 204   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 205 
 206   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 207     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetGetLength: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 208   <span class="s">}</span>
 209   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$Length</span><span class="s">)</span><span class="sc">;</span>
 210   <span class="i">$Length</span> = <span class="i">$This</span><span class="i">-&gt;GetLength</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 211   <span class="i">$Vector</span> = <span class="i">$This</span> / <span class="i">$Length</span><span class="sc">;</span>
 212 
 213   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 214 <span class="s">}</span>
 215 
 216 <span class="c"># Is it a vector object?</span>
<a name="IsVector-"></a> 217 <span class="k">sub </span><span class="m">IsVector ($)</span> <span class="s">{</span>
 218   <span class="k">my</span><span class="s">(</span><span class="i">$Object</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 219 
 220   <span class="k">return</span> <span class="i">_IsVector</span><span class="s">(</span><span class="i">$Object</span><span class="s">)</span><span class="sc">;</span>
 221 <span class="s">}</span>
 222 
 223 <span class="c"># Get size...</span>
<a name="GetSize-"></a> 224 <span class="k">sub </span><span class="m">GetSize</span> <span class="s">{</span>
 225   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 226 
 227   <span class="k">return</span> <span class="k">scalar</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
 228 <span class="s">}</span>
 229 
 230 <span class="c"># Get X value of a 3D vector...</span>
<a name="GetX-"></a> 231 <span class="k">sub </span><span class="m">GetX</span> <span class="s">{</span>
 232   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 233 
 234   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 235     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetX: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 236   <span class="s">}</span>
 237   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_GetValue</span><span class="s">(</span><span class="n">0</span><span class="s">)</span><span class="sc">;</span>
 238 <span class="s">}</span>
 239 
 240 <span class="c"># Set X value of a 3D vector...</span>
<a name="SetX-"></a> 241 <span class="k">sub </span><span class="m">SetX</span> <span class="s">{</span>
 242   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 243 
 244   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 245     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetX: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 246   <span class="s">}</span>
 247   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_SetValue</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span><span class="sc">;</span>
 248 <span class="s">}</span>
 249 
 250 <span class="c"># Get Y value of a 3D vector...</span>
<a name="GetY-"></a> 251 <span class="k">sub </span><span class="m">GetY</span> <span class="s">{</span>
 252   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 253 
 254   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 255     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetY: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 256   <span class="s">}</span>
 257   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_GetValue</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>
 258 <span class="s">}</span>
 259 
 260 <span class="c"># Set Y value of a 3D vector...</span>
<a name="SetY-"></a> 261 <span class="k">sub </span><span class="m">SetY</span> <span class="s">{</span>
 262   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 263 
 264   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 265     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetY: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 266   <span class="s">}</span>
 267   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_SetValue</span><span class="s">(</span><span class="n">1</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span><span class="sc">;</span>
 268 <span class="s">}</span>
 269 
 270 <span class="c"># Get Z value of a 3D vector...</span>
<a name="GetZ-"></a> 271 <span class="k">sub </span><span class="m">GetZ</span> <span class="s">{</span>
 272   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 273 
 274   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 275     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetZ: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 276   <span class="s">}</span>
 277   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_GetValue</span><span class="s">(</span><span class="n">2</span><span class="s">)</span><span class="sc">;</span>
 278 <span class="s">}</span>
 279 
 280 <span class="c"># Set Z value of a 3D vector...</span>
<a name="SetZ-"></a> 281 <span class="k">sub </span><span class="m">SetZ</span> <span class="s">{</span>
 282   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 283 
 284   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 285     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetZ: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 286   <span class="s">}</span>
 287   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_SetValue</span><span class="s">(</span><span class="n">2</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span><span class="sc">;</span>
 288 <span class="s">}</span>
 289 
 290 <span class="c"># Set XYZ value of a 3D vector using:</span>
 291 <span class="c">#    o List of values</span>
 292 <span class="c">#    o Reference to an list of values</span>
 293 <span class="c">#    o Another vector object</span>
 294 <span class="c">#</span>
<a name="SetXYZ-"></a> 295 <span class="k">sub </span><span class="m">SetXYZ</span> <span class="s">{</span>
 296   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 297 
 298   <span class="k">if</span> <span class="s">(</span>!<span class="i">@Values</span><span class="s">)</span> <span class="s">{</span>
 299     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: No values specified...&quot;</span><span class="sc">;</span>
 300   <span class="s">}</span>
 301 
 302   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 303     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 304   <span class="s">}</span>
 305 
 306   <span class="c"># Set vector values...</span>
 307   <span class="k">my</span><span class="s">(</span><span class="i">$FirstValue</span><span class="cm">,</span> <span class="i">$TypeOfFirstValue</span><span class="s">)</span><span class="sc">;</span>
 308   <span class="i">$FirstValue</span> = <span class="i">$Values</span>[<span class="n">0</span>]<span class="sc">;</span>
 309   <span class="i">$TypeOfFirstValue</span> = <span class="k">ref</span> <span class="i">$FirstValue</span><span class="sc">;</span>
 310   <span class="k">if</span> <span class="s">(</span><span class="i">$TypeOfFirstValue</span> =~ <span class="q">/^(SCALAR|HASH|CODE|REF|GLOB)/</span><span class="s">)</span> <span class="s">{</span>
 311     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: A reference to unsupported value format specified...&quot;</span><span class="sc">;</span>
 312   <span class="s">}</span>
 313 
 314   <span class="k">my</span><span class="s">(</span><span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span><span class="sc">;</span>
 315   <span class="k">if</span> <span class="s">(</span><span class="i">_IsVector</span><span class="s">(</span><span class="i">$FirstValue</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 316     <span class="c"># SetXYZ using vector...</span>
 317     <span class="k">if</span> <span class="s">(</span><span class="i">$FirstValue</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 318       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: Input object must be a 3D vector...&quot;</span><span class="sc">;</span>
 319     <span class="s">}</span>
 320     <span class="s">(</span><span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span> = <span class="i">@</span>{<span class="i">$FirstValue</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
 321   <span class="s">}</span>
 322   <span class="k">elsif</span> <span class="s">(</span><span class="i">$TypeOfFirstValue</span> =~ <span class="q">/^ARRAY/</span><span class="s">)</span> <span class="s">{</span>
 323     <span class="c"># SetXYZ using array reference...</span>
 324     <span class="k">if</span> <span class="s">(</span><span class="i">@</span>{<span class="i">$FirstValue</span>} != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 325       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: Input array reference must correspond to an array with three values...&quot;</span><span class="sc">;</span>
 326     <span class="s">}</span>
 327     <span class="s">(</span><span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span> = <span class="i">@</span>{<span class="i">$FirstValue</span>}<span class="sc">;</span>
 328   <span class="s">}</span>
 329   <span class="k">else</span> <span class="s">{</span>
 330     <span class="c"># It&#39;s a list of values...</span>
 331     <span class="k">if</span> <span class="s">(</span><span class="i">@Values</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 332       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetXYZ: Input array must contain three values...&quot;</span><span class="sc">;</span>
 333     <span class="s">}</span>
 334     <span class="s">(</span><span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span> = <span class="i">@Values</span><span class="sc">;</span>
 335   <span class="s">}</span>
 336   <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="n">0</span>] = <span class="i">$X</span><span class="sc">;</span>
 337   <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="n">1</span>] = <span class="i">$Y</span><span class="sc">;</span>
 338   <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="n">2</span>] = <span class="i">$Z</span><span class="sc">;</span>
 339 
 340   <span class="k">return</span> <span class="i">$This</span><span class="sc">;</span>
 341 <span class="s">}</span>
 342 
 343 <span class="c"># Get XYZ as an array or a reference to an array...</span>
 344 <span class="c">#</span>
<a name="GetXYZ-"></a> 345 <span class="k">sub </span><span class="m">GetXYZ</span> <span class="s">{</span>
 346   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 347 
 348   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 349     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetXYZ: Object must be a 3D vector...&quot;</span><span class="sc">;</span>
 350   <span class="s">}</span>
 351   <span class="k">return</span> <span class="k">wantarray</span> ? <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}} <span class="co">:</span> \<span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
 352 <span class="s">}</span>
 353 
 354 <span class="c"># Get a specific value from vector with indicies starting from 0..</span>
<a name="GetValue-"></a> 355 <span class="k">sub </span><span class="m">GetValue</span> <span class="s">{</span>
 356   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 357 
 358   <span class="k">if</span> <span class="s">(</span><span class="i">$Index</span> &lt; <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
 359     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetValue: Index value must be a positive number...&quot;</span><span class="sc">;</span>
 360   <span class="s">}</span>
 361   <span class="k">if</span> <span class="s">(</span><span class="i">$Index</span> &gt;= <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 362     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;GetValue: Index value must be less than size of vector...&quot;</span><span class="sc">;</span>
 363   <span class="s">}</span>
 364   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_GetValue</span><span class="s">(</span><span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 365 <span class="s">}</span>
 366 
 367 <span class="c"># Get a vector value...</span>
<a name="_GetValue-"></a> 368 <span class="k">sub </span><span class="m">_GetValue</span> <span class="s">{</span>
 369   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 370 
 371   <span class="k">return</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 372 <span class="s">}</span>
 373 
 374 <span class="c"># Set a specific value in vector with indicies starting from 0..</span>
<a name="SetValue-"></a> 375 <span class="k">sub </span><span class="m">SetValue</span> <span class="s">{</span>
 376   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Index</span><span class="cm">,</span> <span class="i">$Value</span><span class="cm">,</span> <span class="i">$SkipCheck</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 377 
 378   <span class="c"># Just set it...</span>
 379   <span class="k">if</span> <span class="s">(</span><span class="i">$SkipCheck</span><span class="s">)</span> <span class="s">{</span>
 380     <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_SetValue</span><span class="s">(</span><span class="i">$Index</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span><span class="sc">;</span>
 381   <span class="s">}</span>
 382 
 383   <span class="c"># Check and set...</span>
 384   <span class="k">if</span> <span class="s">(</span><span class="i">$Index</span> &lt; <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
 385     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetValue: Index value must be a positive number...&quot;</span><span class="sc">;</span>
 386   <span class="s">}</span>
 387   <span class="k">if</span> <span class="s">(</span><span class="i">$Index</span> &gt;= <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 388     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;SetValue: Index vaue must be less than size of vector...&quot;</span><span class="sc">;</span>
 389   <span class="s">}</span>
 390 
 391   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;_SetValue</span><span class="s">(</span><span class="i">$Index</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span><span class="sc">;</span>
 392 <span class="s">}</span>
 393 
 394 <span class="c"># Set a vector value...</span>
<a name="_SetValue-"></a> 395 <span class="k">sub </span><span class="m">_SetValue</span> <span class="s">{</span>
 396   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Index</span><span class="cm">,</span> <span class="i">$Value</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 397 
 398   <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="i">$Value</span><span class="sc">;</span>
 399 
 400   <span class="k">return</span> <span class="i">$This</span><span class="sc">;</span>
 401 <span class="s">}</span>
 402 
 403 <span class="c"># Return vector values as an array or reference to an array...</span>
<a name="GetValues-"></a> 404 <span class="k">sub </span><span class="m">GetValues</span> <span class="s">{</span>
 405   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 406 
 407   <span class="k">return</span> <span class="k">wantarray</span> ? <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}} <span class="co">:</span> \<span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
 408 <span class="s">}</span>
 409 
 410 <span class="c"># Get number of non-zero values in vector...</span>
 411 <span class="c">#</span>
<a name="GetNumOfNonZeroValues-"></a> 412 <span class="k">sub </span><span class="m">GetNumOfNonZeroValues</span> <span class="s">{</span>
 413   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 414   <span class="k">my</span><span class="s">(</span><span class="i">$Count</span><span class="cm">,</span> <span class="i">$Index</span><span class="cm">,</span> <span class="i">$Size</span><span class="s">)</span><span class="sc">;</span>
 415 
 416   <span class="i">$Count</span> = <span class="n">0</span><span class="sc">;</span>
 417   <span class="i">$Size</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 418 
 419   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$Size</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 420     <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] != <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
 421       <span class="i">$Count</span>++<span class="sc">;</span>
 422     <span class="s">}</span>
 423   <span class="s">}</span>
 424   <span class="k">return</span> <span class="i">$Count</span><span class="sc">;</span>
 425 <span class="s">}</span>
 426 
 427 <span class="c"># Get percent of non-zero values...</span>
 428 <span class="c">#</span>
<a name="GetPercentOfNonZeroValues-"></a> 429 <span class="k">sub </span><span class="m">GetPercentOfNonZeroValues</span> <span class="s">{</span>
 430   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 431 
 432   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> ? <span class="s">(</span><span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetNumOfNonZeroValues</span><span class="s">(</span><span class="s">)</span>/<span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="s">)</span>*<span class="n">100</span><span class="s">)</span> <span class="co">:</span> <span class="n">0</span><span class="sc">;</span>
 433 <span class="s">}</span>
 434 
 435 <span class="c"># Set value print format for an individual object or the whole class...</span>
<a name="SetValuePrintFormat-"></a> 436 <span class="k">sub </span><span class="m">SetValuePrintFormat ($;$)</span> <span class="s">{</span>
 437   <span class="k">my</span><span class="s">(</span><span class="i">$FirstParameter</span><span class="cm">,</span> <span class="i">$SecondParameter</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 438 
 439   <span class="k">if</span> <span class="s">(</span><span class="s">(</span><span class="i">@_</span> == <span class="n">2</span><span class="s">)</span> &amp;&amp; <span class="s">(</span><span class="i">_IsVector</span><span class="s">(</span><span class="i">$FirstParameter</span><span class="s">)</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 440     <span class="c"># Set value print format for the specific object...</span>
 441     <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$ValuePrintFormat</span><span class="s">)</span> = <span class="s">(</span><span class="i">$FirstParameter</span><span class="cm">,</span> <span class="i">$SecondParameter</span><span class="s">)</span><span class="sc">;</span>
 442 
 443     <span class="i">$This</span>-&gt;{<span class="w">ValueFormat</span>} = <span class="i">$ValuePrintFormat</span><span class="sc">;</span>
 444   <span class="s">}</span>
 445   <span class="k">else</span> <span class="s">{</span>
 446     <span class="c"># Set value print format for the class...</span>
 447     <span class="k">my</span><span class="s">(</span><span class="i">$ValuePrintFormat</span><span class="s">)</span> = <span class="s">(</span><span class="i">$FirstParameter</span><span class="s">)</span><span class="sc">;</span>
 448 
 449     <span class="i">$ValueFormat</span> = <span class="i">$ValuePrintFormat</span><span class="sc">;</span>
 450   <span class="s">}</span>
 451 <span class="s">}</span>
 452 
 453 <span class="c"># Zero vector of specified size or size 3...</span>
<a name="ZeroVector-"></a> 454 <span class="k">sub </span><span class="m">ZeroVector (;$)</span> <span class="s">{</span>
 455   <span class="k">my</span><span class="s">(</span><span class="i">$Size</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 456   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 457 
 458   <span class="i">$Size</span> = <span class="s">(</span><span class="k">defined</span> <span class="i">$Size</span><span class="s">)</span> ? <span class="i">$Size</span> <span class="co">:</span> <span class="n">3</span><span class="sc">;</span>
 459   <span class="i">@Values</span> = <span class="s">(</span><span class="q">&#39;0&#39;</span><span class="s">)</span> x <span class="i">$Size</span><span class="sc">;</span>
 460 
 461   <span class="i">$Vector</span> = <span class="i">new</span> <span class="i">Vector</span><span class="s">(</span>\<span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 462   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 463 <span class="s">}</span>
 464 
 465 <span class="c"># Unit vector of specified size or size 3...</span>
<a name="UnitVector-"></a> 466 <span class="k">sub </span><span class="m">UnitVector (;$)</span> <span class="s">{</span>
 467   <span class="k">my</span><span class="s">(</span><span class="i">$Size</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
 468   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 469 
 470   <span class="i">$Size</span> = <span class="s">(</span><span class="k">defined</span> <span class="i">$Size</span><span class="s">)</span> ? <span class="i">$Size</span> <span class="co">:</span> <span class="n">3</span><span class="sc">;</span>
 471   <span class="i">@Values</span> = <span class="s">(</span><span class="q">&#39;1&#39;</span><span class="s">)</span> x <span class="i">$Size</span><span class="sc">;</span>
 472 
 473   <span class="i">$Vector</span> = <span class="i">new</span> <span class="i">Vector</span><span class="s">(</span>\<span class="i">@Values</span><span class="s">)</span><span class="sc">;</span>
 474   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 475 <span class="s">}</span>
 476 
 477 <span class="c"># Unit X vector of size 3...</span>
<a name="UnitXVector-"></a> 478 <span class="k">sub </span><span class="m">UnitXVector ()</span> <span class="s">{</span>
 479   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="s">)</span><span class="sc">;</span>
 480 
 481   <span class="i">$Vector</span> = <span class="i">new</span> <span class="i">Vector</span><span class="s">(</span><span class="n">1</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span>
 482   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 483 <span class="s">}</span>
 484 
 485 <span class="c"># Unit Y vector of size 3...</span>
<a name="UnitYVector-"></a> 486 <span class="k">sub </span><span class="m">UnitYVector ()</span> <span class="s">{</span>
 487   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="s">)</span><span class="sc">;</span>
 488 
 489   <span class="i">$Vector</span> = <span class="i">new</span> <span class="i">Vector</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span> <span class="n">1</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span><span class="sc">;</span>
 490   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 491 <span class="s">}</span>
 492 
 493 <span class="c"># Unit Z vector of size 3...</span>
<a name="UnitZVector-"></a> 494 <span class="k">sub </span><span class="m">UnitZVector ()</span> <span class="s">{</span>
 495   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="s">)</span><span class="sc">;</span>
 496 
 497   <span class="i">$Vector</span> = <span class="i">new</span> <span class="i">Vector</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
 498   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 499 <span class="s">}</span>
 500 
 501 <span class="c">#</span>
 502 <span class="c"># Vector addition operator supports two addition modes:</span>
 503 <span class="c">#   . Addition of two vectors by adding corresponding vector values</span>
 504 <span class="c">#   . Addition of a scalar value to vector values ($Vector + 1)</span>
 505 <span class="c">#</span>
 506 <span class="c"># Caveats:</span>
 507 <span class="c">#   . Addition of a vector to scalar is not allowed (1 + $Vector)</span>
 508 <span class="c">#</span>
<a name="_VectorAdditionOperator-"></a> 509 <span class="k">sub </span><span class="m">_VectorAdditionOperator</span> <span class="s">{</span>
 510   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 511 
 512   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorAdditionOperator: Vector addition failed&quot;</span><span class="sc">;</span>
 513   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 514 
 515   <span class="c"># Do the addition. Order can be ignored: It&#39;s a commumative operation.</span>
 516   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 517   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 518   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 519 
 520   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 521     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 522     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 523       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] += <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 524     <span class="s">}</span>
 525   <span class="s">}</span>
 526   <span class="k">else</span> <span class="s">{</span>
 527     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 528       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 529     <span class="s">}</span>
 530     <span class="c"># Scalar addition...</span>
 531     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 532       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] += <span class="i">$Other</span><span class="sc">;</span>
 533     <span class="s">}</span>
 534   <span class="s">}</span>
 535   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 536 <span class="s">}</span>
 537 
 538 <span class="c">#</span>
 539 <span class="c"># Vector subtraction operator supports two subtraction modes:</span>
 540 <span class="c">#   . Subtraction of two vectors by subtracting corresponding vector values</span>
 541 <span class="c">#   . Subtraction of a scalar value from vector values ($Vector - 1)</span>
 542 <span class="c">#</span>
 543 <span class="c"># Caveats:</span>
 544 <span class="c">#   . Subtraction of a vector from scalar is not allowed (1 - $Vector)</span>
 545 <span class="c">#</span>
<a name="_VectorSubtractionOperator-"></a> 546 <span class="k">sub </span><span class="m">_VectorSubtractionOperator</span> <span class="s">{</span>
 547   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 548 
 549   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorSubtractionOperator: Vector subtracttion failed&quot;</span><span class="sc">;</span>
 550   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 551 
 552   <span class="c"># Do the subtraction...</span>
 553   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 554   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 555   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 556 
 557   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 558     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 559     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 560       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] -= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 561     <span class="s">}</span>
 562   <span class="s">}</span>
 563   <span class="k">else</span> <span class="s">{</span>
 564     <span class="c"># Scalar subtraction...</span>
 565     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 566       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 567     <span class="s">}</span>
 568     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 569       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] -= <span class="i">$Other</span><span class="sc">;</span>
 570     <span class="s">}</span>
 571   <span class="s">}</span>
 572   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 573 <span class="s">}</span>
 574 
 575 <span class="c">#</span>
 576 <span class="c"># Vector multiplication operator supports two multiplication modes:</span>
 577 <span class="c">#   . Multiplication of two vectors by multiplying corresponding vector values</span>
 578 <span class="c">#   . Multiplying vector values by a scalar ($Vector * 1)</span>
 579 <span class="c">#</span>
 580 <span class="c"># Caveats:</span>
 581 <span class="c">#   . Multiplication of a scalar by a vector is not allowed (1 * $Vector)</span>
 582 <span class="c">#</span>
<a name="_VectorMultiplicationOperator-"></a> 583 <span class="k">sub </span><span class="m">_VectorMultiplicationOperator</span> <span class="s">{</span>
 584   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 585 
 586   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorMultiplicationOperator: Vector addition failed&quot;</span><span class="sc">;</span>
 587   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 588 
 589   <span class="c"># Do the multiplication...</span>
 590   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 591   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 592   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 593 
 594   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 595     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 596     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 597       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] *= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 598     <span class="s">}</span>
 599   <span class="s">}</span>
 600   <span class="k">else</span> <span class="s">{</span>
 601     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 602       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 603     <span class="s">}</span>
 604     <span class="c"># Scalar multiplication...</span>
 605     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 606       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] *= <span class="i">$Other</span><span class="sc">;</span>
 607     <span class="s">}</span>
 608   <span class="s">}</span>
 609   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 610 <span class="s">}</span>
 611 
 612 <span class="c">#</span>
 613 <span class="c"># Vector division operator supports two division modes:</span>
 614 <span class="c">#   . Division of two vectors by dividing corresponding vector values</span>
 615 <span class="c">#   . Dividing vector values by a scalar ($Vector / 2)</span>
 616 <span class="c">#</span>
 617 <span class="c"># Caveats:</span>
 618 <span class="c">#   . Division of a scalar by a vector is not allowed (1 / $Vector)</span>
 619 <span class="c">#</span>
<a name="_VectorDivisionOperator-"></a> 620 <span class="k">sub </span><span class="m">_VectorDivisionOperator</span> <span class="s">{</span>
 621   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 622 
 623   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorDivisionOperator: Vector division failed&quot;</span><span class="sc">;</span>
 624   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 625 
 626   <span class="c"># Do the division...</span>
 627   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 628   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 629   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 630 
 631   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 632     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 633     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 634       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] /= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 635     <span class="s">}</span>
 636   <span class="s">}</span>
 637   <span class="k">else</span> <span class="s">{</span>
 638     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 639       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 640     <span class="s">}</span>
 641     <span class="c"># Scalar divison...</span>
 642     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 643       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] /=  <span class="i">$Other</span><span class="sc">;</span>
 644     <span class="s">}</span>
 645   <span class="s">}</span>
 646   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 647 <span class="s">}</span>
 648 
 649 <span class="c">#</span>
 650 <span class="c"># Vector exponentiation operator supports two exponentiation modes:</span>
 651 <span class="c">#   . Exponentiation of two vectors by exponentiation of  corresponding vector values</span>
 652 <span class="c">#   . Exponentiation of vector values by a scalar ($Vector ** 2)</span>
 653 <span class="c">#</span>
 654 <span class="c"># Caveats:</span>
 655 <span class="c">#   . Exponent of scalar by a vector is not allowed (2 ** $Vector)</span>
 656 <span class="c">#</span>
<a name="_VectorExponentiationOperator-"></a> 657 <span class="k">sub </span><span class="m">_VectorExponentiationOperator</span> <span class="s">{</span>
 658   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 659 
 660   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorExponentiationOperator: Vector exponentiation failed&quot;</span><span class="sc">;</span>
 661   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 662 
 663   <span class="c"># Do the exponentiation...</span>
 664   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 665   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 666   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 667 
 668   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 669     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 670     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 671       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] **= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 672     <span class="s">}</span>
 673   <span class="s">}</span>
 674   <span class="k">else</span> <span class="s">{</span>
 675     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 676       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 677     <span class="s">}</span>
 678     <span class="c"># Scalar exponentiation...</span>
 679     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 680       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] **=  <span class="i">$Other</span><span class="sc">;</span>
 681     <span class="s">}</span>
 682   <span class="s">}</span>
 683   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 684 <span class="s">}</span>
 685 
 686 <span class="c">#</span>
 687 <span class="c"># Vector modulus operator supports two modulus modes:</span>
 688 <span class="c">#   . Modulus of two vectors by taking modulus between corresponding vector values</span>
 689 <span class="c">#   . Modulus of vector values by a scalar ($Vector % 2)</span>
 690 <span class="c">#</span>
 691 <span class="c"># Caveats:</span>
 692 <span class="c">#   . Modulus of scalar by a vector is not allowed (2 % $Vector)</span>
 693 <span class="c">#</span>
<a name="_VectorModulusOperator-"></a> 694 <span class="k">sub </span><span class="m">_VectorModulusOperator</span> <span class="s">{</span>
 695   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 696 
 697   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorModulusOperator: Vector exponentiation failed&quot;</span><span class="sc">;</span>
 698   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 699 
 700   <span class="c"># Take the modulus...</span>
 701   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 702   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 703   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 704 
 705   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 706     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 707     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 708       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] %= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
 709     <span class="s">}</span>
 710   <span class="s">}</span>
 711   <span class="k">else</span> <span class="s">{</span>
 712     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 713       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 714     <span class="s">}</span>
 715     <span class="c"># Scalar modulus...</span>
 716     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 717       <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] %=  <span class="i">$Other</span><span class="sc">;</span>
 718     <span class="s">}</span>
 719   <span class="s">}</span>
 720   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 721 <span class="s">}</span>
 722 
 723 <span class="c">#</span>
 724 <span class="c"># Vector dot product operator supports two modes:</span>
 725 <span class="c">#   . Dot product of two 3D vectors</span>
 726 <span class="c">#   . Concatenation of a vector and a scalar</span>
 727 <span class="c">#</span>
<a name="_VectorDotProductOperator-"></a> 728 <span class="k">sub </span><span class="m">_VectorDotProductOperator</span> <span class="s">{</span>
 729   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 730 
 731   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorDotProductOperator: Vector dot product failed&quot;</span><span class="sc">;</span>
 732   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 733 
 734   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 735     <span class="c"># Calculate dot product of two 3D vectors...</span>
 736     <span class="k">my</span><span class="s">(</span><span class="i">$DotProduct</span><span class="s">)</span><span class="sc">;</span>
 737     <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 738       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: Both vectors must be 3D vectors...&quot;</span><span class="sc">;</span>
 739     <span class="s">}</span>
 740     <span class="i">$DotProduct</span> = <span class="i">$This</span><span class="i">-&gt;GetX</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetX</span> + <span class="i">$This</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span> + <span class="i">$This</span><span class="i">-&gt;GetZ</span> * <span class="i">$Other</span><span class="i">-&gt;GetZ</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 741     <span class="k">return</span> <span class="i">$DotProduct</span><span class="sc">;</span>
 742   <span class="s">}</span>
 743   <span class="k">else</span> <span class="s">{</span>
 744     <span class="c"># Do a string concatenation and return the string...</span>
 745     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 746       <span class="k">return</span> <span class="i">$Other</span> . <span class="i">$This</span><span class="i">-&gt;StringifyVector</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 747     <span class="s">}</span>
 748     <span class="k">else</span> <span class="s">{</span>
 749       <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;StringifyVector</span><span class="s">(</span><span class="s">)</span> . <span class="i">$Other</span><span class="sc">;</span>
 750     <span class="s">}</span>
 751   <span class="s">}</span>
 752 <span class="s">}</span>
 753 
 754 <span class="c">#</span>
 755 <span class="c"># Vector cross product operator genrates a new vector which is the cross</span>
 756 <span class="c"># product of two 3D vectors.</span>
 757 <span class="c">#</span>
 758 <span class="c"># For two vectors, V1 (X1, Y1, Z1) and V2 (X2, Y2, Z2), cross product</span>
 759 <span class="c"># V1 x V2 corresponds: (Y1.Z2 - Z1.Y2), (Z1.X2 - X1.Z2), (X1.Y2 - Y1.X2)</span>
 760 <span class="c">#</span>
<a name="_VectorCrossProductOperator-"></a> 761 <span class="k">sub </span><span class="m">_VectorCrossProductOperator</span> <span class="s">{</span>
 762   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 763 
 764   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorCrossProductOperator: Vector cross product failed&quot;</span><span class="sc">;</span>
 765   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 766 
 767   <span class="k">if</span> <span class="s">(</span>!<span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 768     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: Both object must be vectors...&quot;</span><span class="sc">;</span>
 769   <span class="s">}</span>
 770 
 771   <span class="c"># Calculate cross product of two 3D vectors...</span>
 772   <span class="k">if</span> <span class="s">(</span><span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="n">3</span><span class="s">)</span> <span class="s">{</span>
 773     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: Both vectors must be 3D vectors...&quot;</span><span class="sc">;</span>
 774   <span class="s">}</span>
 775   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span><span class="sc">;</span>
 776   <span class="i">$X</span> = <span class="i">$This</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetZ</span><span class="s">(</span><span class="s">)</span> - <span class="i">$This</span><span class="i">-&gt;GetZ</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 777   <span class="i">$Y</span> = <span class="i">$This</span><span class="i">-&gt;GetZ</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetX</span><span class="s">(</span><span class="s">)</span> - <span class="i">$This</span><span class="i">-&gt;GetX</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetZ</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 778   <span class="i">$Z</span> = <span class="i">$This</span><span class="i">-&gt;GetX</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span> - <span class="i">$This</span><span class="i">-&gt;GetY</span><span class="s">(</span><span class="s">)</span> * <span class="i">$Other</span><span class="i">-&gt;GetX</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 779 
 780   <span class="i">$Vector</span> = <span class="s">(</span><span class="k">ref</span> <span class="i">$This</span><span class="s">)</span><span class="i">-&gt;new</span><span class="s">(</span><span class="i">$X</span><span class="cm">,</span> <span class="i">$Y</span><span class="cm">,</span> <span class="i">$Z</span><span class="s">)</span><span class="sc">;</span>
 781 
 782   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
 783 <span class="s">}</span>
 784 
 785 <span class="c">#</span>
 786 <span class="c"># Vector booelan operator checks whether a vector contains at least one non-zero</span>
 787 <span class="c"># value...</span>
 788 <span class="c">#</span>
<a name="_VectorBooleanOperator-"></a> 789 <span class="k">sub </span><span class="m">_VectorBooleanOperator</span> <span class="s">{</span>
 790   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 791 
 792   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorBooleanOperator: Vector boolean operation failed&quot;</span><span class="sc">;</span>
 793   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 794 
 795   <span class="k">my</span><span class="s">(</span><span class="i">$Size</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 796   <span class="i">$Size</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 797 
 798   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$Size</span> - <span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 799     <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] != <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
 800       <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 801     <span class="s">}</span>
 802   <span class="s">}</span>
 803   <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 804 <span class="s">}</span>
 805 
 806 <span class="c">#</span>
 807 <span class="c"># Vector not booelan operator checks whether all values of a vector are zero.</span>
 808 <span class="c">#</span>
<a name="_VectorNotBooleanOperator-"></a> 809 <span class="k">sub </span><span class="m">_VectorNotBooleanOperator</span> <span class="s">{</span>
 810   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 811 
 812   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorNotBooleanOperator: Vector not boolean operation failed&quot;</span><span class="sc">;</span>
 813   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 814 
 815   <span class="k">my</span><span class="s">(</span><span class="i">$Size</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 816   <span class="i">$Size</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 817 
 818   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$Size</span> - <span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 819     <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] != <span class="n">0</span><span class="s">)</span> <span class="s">{</span>
 820       <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 821     <span class="s">}</span>
 822   <span class="s">}</span>
 823   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 824 <span class="s">}</span>
 825 
 826 <span class="c">#</span>
 827 <span class="c"># Vector equal operator supports two modes:</span>
 828 <span class="c">#   . Comparion of corresponding values in two vectors</span>
 829 <span class="c">#   . Comparing vectors values to a scalar ($Vector == 2)</span>
 830 <span class="c">#</span>
 831 <span class="c"># Caveats:</span>
 832 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 == $Vector)</span>
 833 <span class="c">#</span>
<a name="_VectorEqualOperator-"></a> 834 <span class="k">sub </span><span class="m">_VectorEqualOperator</span> <span class="s">{</span>
 835   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$CheckVectorSizes</span><span class="s">)</span><span class="sc">;</span>
 836 
 837   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorEqualOperator: Vector equal comparison failed&quot;</span><span class="sc">;</span>
 838   <span class="i">$CheckVectorSizes</span> = <span class="n">0</span><span class="sc">;</span>
 839   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="cm">,</span> <span class="i">$CheckVectorSizes</span><span class="s">)</span><span class="sc">;</span>
 840 
 841   <span class="c"># Do the comparison...</span>
 842   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 843   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 844 
 845   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 846     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 847     <span class="k">my</span><span class="s">(</span><span class="i">$OtherSize</span><span class="s">)</span> = <span class="i">$Other</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 848     <span class="k">if</span> <span class="s">(</span><span class="i">$ThisSize</span> != <span class="i">$OtherSize</span><span class="s">)</span> <span class="s">{</span>
 849       <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 850     <span class="s">}</span>
 851     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 852       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] != <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
 853         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 854       <span class="s">}</span>
 855     <span class="s">}</span>
 856   <span class="s">}</span>
 857   <span class="k">else</span> <span class="s">{</span>
 858     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 859       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 860     <span class="s">}</span>
 861     <span class="c"># Scalar comparison...</span>
 862     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 863       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] != <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
 864         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 865       <span class="s">}</span>
 866     <span class="s">}</span>
 867   <span class="s">}</span>
 868   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 869 <span class="s">}</span>
 870 
 871 <span class="c">#</span>
 872 <span class="c"># Vector not equal operator supports two modes:</span>
 873 <span class="c">#   . Comparion of corresponding values in two vectors</span>
 874 <span class="c">#   . Comparing vectors values to a scalar ($Vector != 2)</span>
 875 <span class="c">#</span>
 876 <span class="c"># Caveats:</span>
 877 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 != $Vector2)</span>
 878 <span class="c">#</span>
<a name="_VectorNotEqualOperator-"></a> 879 <span class="k">sub </span><span class="m">_VectorNotEqualOperator</span> <span class="s">{</span>
 880   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$CheckVectorSizes</span><span class="s">)</span><span class="sc">;</span>
 881 
 882   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorNotEqualOperator: Vector not equal comparison failed&quot;</span><span class="sc">;</span>
 883   <span class="i">$CheckVectorSizes</span> = <span class="n">0</span><span class="sc">;</span>
 884   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="cm">,</span> <span class="i">$CheckVectorSizes</span><span class="s">)</span><span class="sc">;</span>
 885 
 886   <span class="c"># Do the comparison...</span>
 887   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 888   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 889 
 890   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 891     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 892     <span class="k">my</span><span class="s">(</span><span class="i">$OtherSize</span><span class="s">)</span> = <span class="i">$Other</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 893     <span class="k">if</span> <span class="s">(</span><span class="i">$ThisSize</span> != <span class="i">$OtherSize</span><span class="s">)</span> <span class="s">{</span>
 894       <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 895     <span class="s">}</span>
 896     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 897       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] == <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
 898         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 899       <span class="s">}</span>
 900     <span class="s">}</span>
 901   <span class="s">}</span>
 902   <span class="k">else</span> <span class="s">{</span>
 903     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 904       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 905     <span class="s">}</span>
 906     <span class="c"># Scalar comparison...</span>
 907     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 908       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] == <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
 909         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 910       <span class="s">}</span>
 911     <span class="s">}</span>
 912   <span class="s">}</span>
 913   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 914 <span class="s">}</span>
 915 
 916 <span class="c">#</span>
 917 <span class="c"># Vector less than operator supports two modes:</span>
 918 <span class="c">#   . Comparion of corresponding values in two vectors</span>
 919 <span class="c">#   . Comparing vectors values to a scalar ($Vector &lt; 2)</span>
 920 <span class="c">#</span>
 921 <span class="c"># Caveats:</span>
 922 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 &lt; $Vector2)</span>
 923 <span class="c">#</span>
<a name="_VectorLessThanOperator-"></a> 924 <span class="k">sub </span><span class="m">_VectorLessThanOperator</span> <span class="s">{</span>
 925   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 926 
 927   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorLessThanOperator: Vector less than comparison failed&quot;</span><span class="sc">;</span>
 928   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 929 
 930   <span class="c"># Do the comparison...</span>
 931   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 932   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 933 
 934   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 935     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 936     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 937       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &gt;= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
 938         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 939       <span class="s">}</span>
 940     <span class="s">}</span>
 941   <span class="s">}</span>
 942   <span class="k">else</span> <span class="s">{</span>
 943     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 944       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 945     <span class="s">}</span>
 946     <span class="c"># Scalar comparison...</span>
 947     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 948       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &gt;= <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
 949         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 950       <span class="s">}</span>
 951     <span class="s">}</span>
 952   <span class="s">}</span>
 953   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 954 <span class="s">}</span>
 955 
 956 <span class="c">#</span>
 957 <span class="c"># Vector less than equla operator supports two modes:</span>
 958 <span class="c">#   . Comparion of corresponding values in two vectors</span>
 959 <span class="c">#   . Comparing vectors values to a scalar ($Vector &lt;= 2)</span>
 960 <span class="c">#</span>
 961 <span class="c"># Caveats:</span>
 962 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 &lt;= $Vector2)</span>
 963 <span class="c">#</span>
<a name="_VectorLessThanEqualOperator-"></a> 964 <span class="k">sub </span><span class="m">_VectorLessThanEqualOperator</span> <span class="s">{</span>
 965   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
 966 
 967   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorLessThanEqualOperator: Vector less than equal comparison failed&quot;</span><span class="sc">;</span>
 968   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
 969 
 970   <span class="c"># Do the comparison...</span>
 971   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
 972   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 973 
 974   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
 975     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
 976     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 977       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &gt; <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
 978         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 979       <span class="s">}</span>
 980     <span class="s">}</span>
 981   <span class="s">}</span>
 982   <span class="k">else</span> <span class="s">{</span>
 983     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
 984       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
 985     <span class="s">}</span>
 986     <span class="c"># Scalar comparison...</span>
 987     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
 988       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &gt; <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
 989         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
 990       <span class="s">}</span>
 991     <span class="s">}</span>
 992   <span class="s">}</span>
 993   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
 994 <span class="s">}</span>
 995 
 996 <span class="c">#</span>
 997 <span class="c"># Vector greatar than operator supports two modes:</span>
 998 <span class="c">#   . Comparion of corresponding values in two vectors</span>
 999 <span class="c">#   . Comparing vectors values to a scalar ($Vector &gt; 2)</span>
1000 <span class="c">#</span>
1001 <span class="c"># Caveats:</span>
1002 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 &gt; $Vector2)</span>
1003 <span class="c">#</span>
<a name="_VectorGreatarThanOperator-"></a>1004 <span class="k">sub </span><span class="m">_VectorGreatarThanOperator</span> <span class="s">{</span>
1005   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1006 
1007   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorGreatarThanOperator: Vector greatar than comparison failed&quot;</span><span class="sc">;</span>
1008   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1009 
1010   <span class="c"># Do the comparison...</span>
1011   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1012   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1013 
1014   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
1015     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
1016     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1017       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &lt;= <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
1018         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
1019       <span class="s">}</span>
1020     <span class="s">}</span>
1021   <span class="s">}</span>
1022   <span class="k">else</span> <span class="s">{</span>
1023     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
1024       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
1025     <span class="s">}</span>
1026     <span class="c"># Scalar comparison...</span>
1027     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1028       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &lt;= <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
1029         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
1030       <span class="s">}</span>
1031     <span class="s">}</span>
1032   <span class="s">}</span>
1033   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
1034 <span class="s">}</span>
1035 
1036 <span class="c">#</span>
1037 <span class="c"># Vector greatar than equal operator supports two modes:</span>
1038 <span class="c">#   . Comparion of corresponding values in two vectors</span>
1039 <span class="c">#   . Comparing vectors values to a scalar ($Vector &gt;= 2)</span>
1040 <span class="c">#</span>
1041 <span class="c"># Caveats:</span>
1042 <span class="c">#   . Comparison of a scalar to vector values is not allowed (2 &lt;= $Vector2)</span>
1043 <span class="c">#</span>
<a name="_VectorGreatarThanEqualOperator-"></a>1044 <span class="k">sub </span><span class="m">_VectorGreatarThanEqualOperator</span> <span class="s">{</span>
1045   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1046 
1047   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorGreatarThanEqualOperator: Vector greatar than equal comparison failed&quot;</span><span class="sc">;</span>
1048   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1049 
1050   <span class="c"># Do the comparison...</span>
1051   <span class="k">my</span><span class="s">(</span><span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1052   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1053 
1054   <span class="k">if</span> <span class="s">(</span><span class="i">$OtherIsVector</span><span class="s">)</span> <span class="s">{</span>
1055     <span class="c"># $OrderFlipped is set to false for two vectors...</span>
1056     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1057       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &lt; <span class="i">$Other</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="s">)</span> <span class="s">{</span>
1058         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
1059       <span class="s">}</span>
1060     <span class="s">}</span>
1061   <span class="s">}</span>
1062   <span class="k">else</span> <span class="s">{</span>
1063     <span class="k">if</span> <span class="s">(</span><span class="i">$OrderFlipped</span><span class="s">)</span> <span class="s">{</span>
1064       <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: First object must be a vector...&quot;</span><span class="sc">;</span>
1065     <span class="s">}</span>
1066     <span class="c"># Scalar comparison...</span>
1067     <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1068       <span class="k">if</span> <span class="s">(</span><span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] &lt; <span class="i">$Other</span><span class="s">)</span> <span class="s">{</span>
1069         <span class="k">return</span> <span class="n">0</span><span class="sc">;</span>
1070       <span class="s">}</span>
1071     <span class="s">}</span>
1072   <span class="s">}</span>
1073   <span class="k">return</span> <span class="n">1</span><span class="sc">;</span>
1074 <span class="s">}</span>
1075 
1076 <span class="c">#</span>
1077 <span class="c"># Vector negative value operator returns a vector with values corresponding to</span>
1078 <span class="c"># negative values of a vector</span>
1079 <span class="c">#</span>
<a name="_VectorNegativeValueOperator-"></a>1080 <span class="k">sub </span><span class="m">_VectorNegativeValueOperator</span> <span class="s">{</span>
1081   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1082 
1083   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorNegativeValueOperator: Vector negative value operation failed&quot;</span><span class="sc">;</span>
1084   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1085 
1086   <span class="c"># Take the negative value...</span>
1087   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1088   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1089   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1090 
1091   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1092     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = - <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1093   <span class="s">}</span>
1094   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1095 <span class="s">}</span>
1096 
1097 <span class="c">#</span>
1098 <span class="c"># Vector absolute value operator returns a vector with values corresponding to</span>
1099 <span class="c"># absolute values of a vector</span>
1100 <span class="c">#</span>
<a name="_VectorAbsoluteValueOperator-"></a>1101 <span class="k">sub </span><span class="m">_VectorAbsoluteValueOperator</span> <span class="s">{</span>
1102   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1103 
1104   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorAbsoluteValueOperator: Vector absolute value operation failed&quot;</span><span class="sc">;</span>
1105   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1106 
1107   <span class="c"># Take the absolute value...</span>
1108   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1109   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1110   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1111 
1112   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1113     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">abs</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1114   <span class="s">}</span>
1115   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1116 <span class="s">}</span>
1117 
1118 <span class="c">#</span>
1119 <span class="c"># Vector exp natural base operator returns a vector with values corresponding to</span>
1120 <span class="c"># e raised to the power of values in a vector</span>
1121 <span class="c">#</span>
<a name="_VectorExpNaturalBaseOperator-"></a>1122 <span class="k">sub </span><span class="m">_VectorExpNaturalBaseOperator</span> <span class="s">{</span>
1123   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1124 
1125   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorExpNaturalBaseOperator: Vector exp operation failed&quot;</span><span class="sc">;</span>
1126   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1127 
1128   <span class="c"># Take the absolute value...</span>
1129   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1130   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1131   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1132 
1133   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1134     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">exp</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1135   <span class="s">}</span>
1136   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1137 <span class="s">}</span>
1138 
1139 <span class="c">#</span>
1140 <span class="c"># Vector log natural base operator returns a vector with values corresponding to</span>
1141 <span class="c"># log of values in a vector</span>
1142 <span class="c">#</span>
<a name="_VectorLogNaturalBaseOperator-"></a>1143 <span class="k">sub </span><span class="m">_VectorLogNaturalBaseOperator</span> <span class="s">{</span>
1144   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1145 
1146   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorLogNaturalBaseOperator: Vector log operation failed&quot;</span><span class="sc">;</span>
1147   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1148 
1149   <span class="c"># Take the absolute value...</span>
1150   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1151   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1152   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1153 
1154   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1155     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">log</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1156   <span class="s">}</span>
1157   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1158 <span class="s">}</span>
1159 
1160 <span class="c">#</span>
1161 <span class="c"># Vector cosine operator returns a vector with values corresponding to cosine of values</span>
1162 <span class="c"># in a vector. Input vector values are assumed to be in radians.</span>
1163 <span class="c">#</span>
<a name="_VectorCosineOperator-"></a>1164 <span class="k">sub </span><span class="m">_VectorCosineOperator</span> <span class="s">{</span>
1165   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1166 
1167   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorCosineOperator: Vector cos operation failed&quot;</span><span class="sc">;</span>
1168   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1169 
1170   <span class="c"># Take the absolute value...</span>
1171   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1172   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1173   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1174 
1175   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1176     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">cos</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1177   <span class="s">}</span>
1178   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1179 <span class="s">}</span>
1180 
1181 <span class="c">#</span>
1182 <span class="c"># Vector sine operator returns a vector with values corresponding to sine of values</span>
1183 <span class="c"># in a vector. Input vector values are assumed to be in radians.</span>
1184 <span class="c">#</span>
<a name="_VectorSineOperator-"></a>1185 <span class="k">sub </span><span class="m">_VectorSineOperator</span> <span class="s">{</span>
1186   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1187 
1188   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorSineOperator: Vector sin operation failed&quot;</span><span class="sc">;</span>
1189   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1190 
1191   <span class="c"># Take the absolute value...</span>
1192   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1193   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1194   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1195 
1196   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1197     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">sin</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1198   <span class="s">}</span>
1199   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1200 <span class="s">}</span>
1201 
1202 <span class="c">#</span>
1203 <span class="c"># Vector square root  returns a vector with values corresponding to sqrt of values</span>
1204 <span class="c"># in a vector.</span>
1205 <span class="c">#</span>
<a name="_VectorSquareRootOperator-"></a>1206 <span class="k">sub </span><span class="m">_VectorSquareRootOperator</span> <span class="s">{</span>
1207   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$ErrorMsg</span><span class="s">)</span><span class="sc">;</span>
1208 
1209   <span class="i">$ErrorMsg</span> = <span class="q">&quot;_VectorSquareRootOperator: Vector sqrt operation failed&quot;</span><span class="sc">;</span>
1210   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span> = <span class="i">_ProcessOverloadedOperatorParameters</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
1211 
1212   <span class="c"># Take the absolute value...</span>
1213   <span class="k">my</span><span class="s">(</span><span class="i">$Vector</span><span class="cm">,</span> <span class="i">$ThisSize</span><span class="cm">,</span> <span class="i">$Index</span><span class="s">)</span><span class="sc">;</span>
1214   <span class="i">$Vector</span> = <span class="i">$This</span><span class="i">-&gt;Copy</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1215   <span class="i">$ThisSize</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1216 
1217   <span class="k">for</span> <span class="i">$Index</span> <span class="s">(</span><span class="n">0</span> .. <span class="s">(</span><span class="i">$ThisSize</span> -<span class="n">1</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1218     <span class="i">$Vector</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>] = <span class="k">sqrt</span> <span class="i">$This</span>-&gt;{<span class="w">Values</span>}[<span class="i">$Index</span>]<span class="sc">;</span>
1219   <span class="s">}</span>
1220   <span class="k">return</span> <span class="i">$Vector</span><span class="sc">;</span>
1221 <span class="s">}</span>
1222 
1223 <span class="c"># Turn vector into array for @{$Vector} operation...</span>
<a name="_VectorToArrayOperator-"></a>1224 <span class="k">sub </span><span class="m">_VectorToArrayOperator</span> <span class="s">{</span>
1225   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1226 
1227   <span class="k">return</span> \<span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
1228 <span class="s">}</span>
1229 
1230 <span class="c"># Turn vector into number for $#Vector operation: It&#39;s the size of vector...</span>
<a name="_NumifyVector-"></a>1231 <span class="k">sub </span><span class="m">_NumifyVector</span> <span class="s">{</span>
1232   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1233 
1234   <span class="k">return</span> <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1235 <span class="s">}</span>
1236 
1237 <span class="c"># Process parameters passed to overloaded operators...</span>
1238 <span class="c">#</span>
1239 <span class="c"># For uninary operators, $SecondParameter is not defined.</span>
<a name="_ProcessOverloadedOperatorParameters-"></a>1240 <span class="k">sub </span><span class="m">_ProcessOverloadedOperatorParameters</span> <span class="s">{</span>
1241   <span class="k">my</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$FirstParameter</span><span class="cm">,</span> <span class="i">$SecondParameter</span><span class="cm">,</span> <span class="i">$ParametersOrderStatus</span><span class="cm">,</span> <span class="i">$CheckVectorSizesStatus</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1242   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="cm">,</span> <span class="i">$CheckVectorSizes</span><span class="s">)</span><span class="sc">;</span>
1243 
1244   <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="s">)</span> =  <span class="s">(</span><span class="i">$FirstParameter</span><span class="cm">,</span> <span class="i">$SecondParameter</span><span class="s">)</span><span class="sc">;</span>
1245   <span class="i">$OrderFlipped</span> = <span class="s">(</span><span class="k">defined</span><span class="s">(</span><span class="i">$ParametersOrderStatus</span><span class="s">)</span> &amp;&amp; <span class="i">$ParametersOrderStatus</span><span class="s">)</span> ? <span class="n">1</span> <span class="co">:</span> <span class="n">0</span><span class="sc">;</span>
1246   <span class="i">$CheckVectorSizes</span> = <span class="s">(</span><span class="k">defined</span> <span class="i">$CheckVectorSizesStatus</span><span class="s">)</span> ? <span class="i">$CheckVectorSizesStatus</span> <span class="co">:</span> <span class="n">1</span><span class="sc">;</span>
1247 
1248   <span class="i">_ValidateVector</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$This</span><span class="s">)</span><span class="sc">;</span>
1249 
1250   <span class="i">$OtherIsVector</span> = <span class="n">0</span><span class="sc">;</span>
1251   <span class="k">if</span> <span class="s">(</span><span class="k">defined</span><span class="s">(</span><span class="i">$Other</span><span class="s">)</span> &amp;&amp; <span class="s">(</span><span class="k">ref</span> <span class="i">$Other</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1252     <span class="c"># Make sure $Other is a vector...</span>
1253     <span class="i">_ValidateVector</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$Other</span><span class="s">)</span><span class="sc">;</span>
1254     <span class="k">if</span> <span class="s">(</span><span class="i">$CheckVectorSizes</span><span class="s">)</span> <span class="s">{</span>
1255       <span class="i">_ValidateVectorSizesAreEqual</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="s">)</span><span class="sc">;</span>
1256     <span class="s">}</span>
1257     <span class="i">$OtherIsVector</span> = <span class="n">1</span><span class="sc">;</span>
1258   <span class="s">}</span>
1259   <span class="k">return</span> <span class="s">(</span><span class="i">$This</span><span class="cm">,</span> <span class="i">$Other</span><span class="cm">,</span> <span class="i">$OrderFlipped</span><span class="cm">,</span> <span class="i">$OtherIsVector</span><span class="s">)</span><span class="sc">;</span>
1260 <span class="s">}</span>
1261 
1262 <span class="c"># Is it a vector object?</span>
<a name="_IsVector-"></a>1263 <span class="k">sub </span><span class="m">_IsVector</span> <span class="s">{</span>
1264   <span class="k">my</span><span class="s">(</span><span class="i">$Object</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1265 
1266   <span class="k">return</span> <span class="s">(</span><span class="i">Scalar::Util::blessed</span><span class="s">(</span><span class="i">$Object</span><span class="s">)</span> &amp;&amp; <span class="i">$Object</span><span class="i">-&gt;isa</span><span class="s">(</span><span class="i">$ClassName</span><span class="s">)</span><span class="s">)</span> ? <span class="n">1</span> <span class="co">:</span> <span class="n">0</span><span class="sc">;</span>
1267 <span class="s">}</span>
1268 
1269 <span class="c"># Make sure it&#39;s a vector reference...</span>
<a name="_ValidateVector-"></a>1270 <span class="k">sub </span><span class="m">_ValidateVector</span> <span class="s">{</span>
1271   <span class="k">my</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$Vector</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1272 
1273   <span class="k">if</span> <span class="s">(</span>!<span class="i">_IsVector</span><span class="s">(</span><span class="i">$Vector</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1274     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: Object must be a vector...&quot;</span><span class="sc">;</span>
1275   <span class="s">}</span>
1276 <span class="s">}</span>
1277 
1278 <span class="c"># Make sure size of the two vectors contain the same number of values...</span>
<a name="_ValidateVectorSizesAreEqual-"></a>1279 <span class="k">sub </span><span class="m">_ValidateVectorSizesAreEqual</span> <span class="s">{</span>
1280   <span class="k">my</span><span class="s">(</span><span class="i">$ErrorMsg</span><span class="cm">,</span> <span class="i">$Vector1</span><span class="cm">,</span> <span class="i">$Vector2</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1281 
1282   <span class="k">if</span> <span class="s">(</span><span class="i">$Vector1</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span> != <span class="i">$Vector2</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
1283     <span class="w">croak</span> <span class="q">&quot;Error: ${ClassName}-&gt;${ErrorMsg}: Size of the vectors must be same...&quot;</span><span class="sc">;</span>
1284   <span class="s">}</span>
1285 <span class="s">}</span>
1286 
1287 <span class="c"># Return a string containing vector values...</span>
<a name="StringifyVector-"></a>1288 <span class="k">sub </span><span class="m">StringifyVector</span> <span class="s">{</span>
1289   <span class="k">my</span><span class="s">(</span><span class="i">$This</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
1290   <span class="k">my</span><span class="s">(</span><span class="i">$VectorString</span><span class="cm">,</span> <span class="i">$FormatString</span><span class="cm">,</span> <span class="i">$PrintFormat</span><span class="cm">,</span> <span class="i">$Size</span><span class="cm">,</span> <span class="i">@ValuesFormat</span><span class="s">)</span><span class="sc">;</span>
1291 
1292   <span class="i">$PrintFormat</span> = <span class="s">(</span><span class="k">exists</span> <span class="i">$This</span>-&gt;{<span class="w">ValueFormat</span>}<span class="s">)</span> ? <span class="i">$This</span>-&gt;{<span class="w">ValueFormat</span>} <span class="co">:</span> <span class="i">$ValueFormat</span><span class="sc">;</span>
1293 
1294   <span class="i">@ValuesFormat</span> = <span class="s">(</span><span class="i">$PrintFormat</span><span class="s">)</span> x <span class="k">scalar</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
1295   <span class="i">$FormatString</span> = <span class="k">join</span> <span class="q">&#39; &#39;</span><span class="cm">,</span> <span class="i">@ValuesFormat</span><span class="sc">;</span>
1296 
1297   <span class="i">$Size</span> = <span class="i">$This</span><span class="i">-&gt;GetSize</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
1298 
1299   <span class="i">$VectorString</span> = <span class="k">sprintf</span> <span class="q">&quot;&lt;Size: $Size; Values: [ $FormatString ] &gt;&quot;</span><span class="cm">,</span> <span class="i">@</span>{<span class="i">$This</span>-&gt;{<span class="w">Values</span>}}<span class="sc">;</span>
1300 
1301   <span class="k">return</span> <span class="i">$VectorString</span><span class="sc">;</span>
1302 <span class="s">}</span>
1303 
<a name="EOF-"></a></pre>
<p>&nbsp;</p>
<br />
<center>
<img src="../../../images/h2o2.png">
</center>
</body>
</html>
